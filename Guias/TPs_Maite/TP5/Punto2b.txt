PROTOTIPO proce
PUSH <int*>
PUSH <int>
CALL proce
ADD sp, 8


_start:         PUSH 9
                CALL alloc
                ADD sp, 4

                CALL main

proce:          PUSH bp
                MOV bp, sp
                PUSH ecx
                PUSH edx
                PUSH ebx

                MOV edx, [bp + 12]  ; w[0]
                MOV ecx, edx
                ADD ecx, [bp + 8]   ; w[x]
                
                MOV [ecx - 1], [ecx]
                OR [ecx -1], [edx]

                POP ebx
                POP edx
                POP ecx
                MOV sp, bp
                POP bp
                RET


main:           PUSH bp
                MOV bp, sp
                PUSH ebx            ; i
                PUSH ecx

                MOV ebx, 2
                
                MOV ecx, eax
                ADD ecx, ebx

                MOV [ecx], 501
                MOV [eax], 0xF0F0
                AND [eax], [ecx]

                PUSH eax
                PUSH ebx
                CALL proce
                ADD sp, 8
                
                STOP
